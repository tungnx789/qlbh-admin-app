<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QLBH Admin Dashboard</title>
    <link rel="stylesheet" href="css/admin.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <button class="mobile-menu-toggle" onclick="toggleMobileNav()">
                <i class="fas fa-bars"></i>
            </button>
            <h1><i class="fas fa-cogs"></i> QLBH Admin Dashboard</h1>
            <div class="user-info">
                <span class="user-name" id="userEmail">Admin</span>
                <i class="fas fa-user-circle"></i>
            </div>
            <button onclick="admin.logout()" class="logout-btn" style="margin-left: 10px; padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px;">
                <i class="fas fa-sign-out-alt"></i> ƒêƒÉng Xu·∫•t
            </button>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content" id="navContent">
            <button class="nav-item active" data-module="dashboard">
                <i class="fas fa-chart-pie"></i> T·ªïng Quan
            </button>
            <button class="nav-item" data-module="tonkho">
                <i class="fas fa-boxes"></i> T·ªìn Kho
            </button>
            <button class="nav-item" data-module="nhaphang">
                <i class="fas fa-arrow-down"></i> Nh·∫≠p H√†ng
            </button>
            <button class="nav-item" data-module="banhang">
                <i class="fas fa-shopping-cart"></i> B√°n H√†ng
            </button>
            <button class="nav-item" data-module="xuathuy">
                <i class="fas fa-trash"></i> Xu·∫•t H·ªßy
            </button>
            <button class="nav-item" data-module="search">
                <i class="fas fa-search"></i> T√¨m Ki·∫øm
            </button>
            <button class="nav-item" data-module="baocao">
                <i class="fas fa-chart-bar"></i> B√°o C√°o
            </button>
            <button class="nav-item" data-module="tools">
                <i class="fas fa-tools"></i> Tools
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Module -->
        <div id="dashboard" class="module active">
            <div class="module-header">
                <h2><i class="fas fa-chart-pie"></i> T·ªïng Quan</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="refreshDashboard()">
                        <i class="fas fa-sync-alt"></i> L√†m M·ªõi
                    </button>
                    <span id="dashboardLastUpdate" class="last-update"></span>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-boxes"></i>
                    </div>
                    <div class="stat-content">
                        <h3>T·ªìn Kho</h3>
                        <div class="stat-number" id="totalTonKho">0</div>
                        <div class="stat-trend positive">+5.2%</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="revenueMonthTitle">Doanh Thu Th√°ng</h3>
                        <div class="stat-number" id="totalRevenue">0</div>
                        <div class="stat-trend positive">+12.3%</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="profitMonthTitle">L·ª£i Nhu·∫≠n Th√°ng</h3>
                        <div class="stat-number" id="totalProfit">0</div>
                        <div class="stat-trend positive">+8.1%</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="banMonthTitle">B√°n Th√°ng</h3>
                        <div class="stat-number" id="totalBan">0</div>
                        <div class="stat-trend positive">+15.7%</div>
                    </div>
                </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
                <div class="chart-container">
                    <h4><i class="fas fa-chart-line"></i> Doanh Thu Theo Th√°ng</h4>
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>
        </div>

        <!-- TonKho Module -->
        <div id="tonkho" class="module">
            <div class="module-header">
                <h2><i class="fas fa-boxes"></i> Qu·∫£n L√Ω T·ªìn Kho</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="refreshTonKho()">
                        <i class="fas fa-sync-alt"></i> L√†m M·ªõi
                    </button>
                    <span id="tonkhoLastUpdate" class="last-update"></span>
                </div>
            </div>

            <!-- Mobile-Optimized Filters -->
            <div class="filters-mobile">
                <!-- IMEI V5 Real-time Filter -->
                <div class="filter-card">
                    <div class="filter-input-group">
                        <input 
                            type="text" 
                            id="imeiV5Search" 
                            placeholder="üîç Nh·∫≠p 5 s·ªë cu·ªëi IMEI"
                            maxlength="5"
                            pattern="[0-9]*"
                            inputmode="numeric"
                            class="filter-input-number"
                        >
                        <span class="filter-count" id="imeiV5Count"></span>
                    </div>
                </div>

                <!-- D√≤ng M√°y Mobile Multi-Select -->
                <div class="mobile-multiselect">
                    <button class="multiselect-btn" id="dongMayBtn" type="button">
                        <i class="fas fa-mobile-alt"></i>
                        <span>D√≤ng M√°y</span>
                        <span class="count" id="dongMayCount">T·∫•t c·∫£</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="multiselect-dropdown" id="dongMayDropdown" style="display:none">
                        <div class="multiselect-search">
                            <input 
                                type="text" 
                                placeholder="üîç T√¨m d√≤ng m√°y..." 
                                id="dongMaySearchInput"
                                class="multiselect-search-input"
                            >
                        </div>
                        <div class="multiselect-options" id="dongMayOptions">
                            <!-- Dynamic options s·∫Ω ƒë∆∞·ª£c populate -->
                        </div>
                        <div class="multiselect-actions">
                            <button class="btn-select-all" onclick="selectAllDongMay()">
                                Ch·ªçn t·∫•t c·∫£
                            </button>
                            <button class="btn-clear-all" onclick="clearAllDongMay()">
                                B·ªè ch·ªçn
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Dung L∆∞·ª£ng Mobile Multi-Select -->
                <div class="mobile-multiselect">
                    <button class="multiselect-btn" id="dungLuongBtn" type="button">
                        <i class="fas fa-database"></i>
                        <span>Dung L∆∞·ª£ng</span>
                        <span class="count" id="dungLuongCount">T·∫•t c·∫£</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="multiselect-dropdown" id="dungLuongDropdown" style="display:none">
                        <div class="multiselect-search">
                            <input 
                                type="text" 
                                placeholder="üîç T√¨m dung l∆∞·ª£ng..." 
                                id="dungLuongSearchInput"
                                class="multiselect-search-input"
                            >
                        </div>
                        <div class="multiselect-options" id="dungLuongOptions">
                            <!-- Dynamic options s·∫Ω ƒë∆∞·ª£c populate -->
                        </div>
                        <div class="multiselect-actions">
                            <button class="btn-select-all" onclick="selectAllDungLuong()">
                                Ch·ªçn t·∫•t c·∫£
                            </button>
                            <button class="btn-clear-all" onclick="clearAllDungLuong()">
                                B·ªè ch·ªçn
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Clear All Filters Button -->
                <button class="btn btn-danger btn-clear-filters" onclick="clearAllTonKhoFilters()">
                    <i class="fas fa-times-circle"></i> X√≥a t·∫•t c·∫£ b·ªô l·ªçc
                </button>
            </div>

            <!-- Filter Summary -->
            <div class="filter-summary" id="filterSummary" style="display:none">
                <span id="filterSummaryText"></span>
            </div>

            <!-- Total Records Info -->
            <div class="total-records-info" id="tonkhoTotalRecordsInfo">
                <small>T·ªïng s·ªë b·∫£n ghi: <span id="tonkhoTotalRecordsCount">0</span></small>
            </div>

            <!-- Data Table -->
            <div class="table-responsive">
                <table id="tonkhoTable" class="data-table">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Ng√†y Nh·∫≠p</th>
                            <th>D√≤ng M√°y</th>
                            <th>Dung L∆∞·ª£ng</th>
                            <th>M√†u S·∫Øc</th>
                            <th>IMEI</th>
                            <th>IMEI V5</th>
                            <th>Gi√° Nh·∫≠p</th>
                            <th>Nh√† Cung C·∫•p</th>
                            <th>M√¥ T·∫£ Nh·∫≠p</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tonkhoTableBody">
                        <!-- Data s·∫Ω ƒë∆∞·ª£c load t·ª´ API -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <div class="pagination-controls">
                    <div class="page-size-selector">
                        <label for="tonkhoPageSize">Hi·ªÉn th·ªã:</label>
                        <select id="tonkhoPageSize" onchange="changeTonKhoPageSize()" class="form-control">
                            <option value="10">10 b·∫£n ghi</option>
                            <option value="20">20 b·∫£n ghi</option>
                            <option value="50" selected>50 b·∫£n ghi</option>
                            <option value="100">100 b·∫£n ghi</option>
                        </select>
                    </div>
                    <div class="page-navigation">
                        <button class="btn btn-secondary" onclick="prevTonKhoPage()" id="prevTonKhoBtn">
                            <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
                        </button>
                        <span id="tonkhoPageInfo">Trang 1 / 1</span>
                        <button class="btn btn-secondary" onclick="nextTonKhoPage()" id="nextTonKhoBtn">
                            Sau <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- NhapHang Module -->
        <div id="nhaphang" class="module">
            <div class="module-header">
                <h2><i class="fas fa-arrow-down"></i> L·ªãch S·ª≠ Nh·∫≠p H√†ng</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="refreshNhapHang()">
                        <i class="fas fa-sync-alt"></i> L√†m M·ªõi
                    </button>
                    <span id="nhaphangLastUpdate" class="last-update"></span>
                </div>
            </div>

            <!-- Mobile-Optimized Filters -->
            <div class="filters-mobile">
                <!-- IMEI V5 Real-time Filter -->
                <div class="filter-card">
                    <div class="filter-input-group">
                        <input 
                            type="text" 
                            id="nhapImeiV5Search" 
                            placeholder="üîç Nh·∫≠p 5 s·ªë cu·ªëi IMEI"
                            maxlength="5"
                            pattern="[0-9]*"
                            inputmode="numeric"
                            class="filter-input-number"
                        >
                        <span class="filter-count" id="nhapImeiV5Count"></span>
                    </div>
                </div>

                <!-- D√≤ng M√°y Mobile Multi-Select -->
                <div class="mobile-multiselect">
                    <button class="multiselect-btn" id="nhapDongMayBtn" type="button">
                        <i class="fas fa-mobile-alt"></i>
                        <span>D√≤ng M√°y</span>
                        <span class="count" id="nhapDongMayCount">T·∫•t c·∫£</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="multiselect-dropdown" id="nhapDongMayDropdown" style="display:none">
                        <div class="multiselect-search">
                            <input 
                                type="text" 
                                placeholder="üîç T√¨m d√≤ng m√°y..." 
                                id="nhapDongMaySearchInput"
                                class="multiselect-search-input"
                            >
                        </div>
                        <div class="multiselect-options" id="nhapDongMayOptions">
                            <!-- Dynamic options s·∫Ω ƒë∆∞·ª£c populate -->
                        </div>
                        <div class="multiselect-actions">
                            <button class="btn-select-all" onclick="selectAllNhapDongMay()">
                                Ch·ªçn t·∫•t c·∫£
                            </button>
                            <button class="btn-clear-all" onclick="clearAllNhapDongMay()">
                                B·ªè ch·ªçn
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Dung L∆∞·ª£ng Mobile Multi-Select -->
                <div class="mobile-multiselect">
                    <button class="multiselect-btn" id="nhapDungLuongBtn" type="button">
                        <i class="fas fa-database"></i>
                        <span>Dung L∆∞·ª£ng</span>
                        <span class="count" id="nhapDungLuongCount">T·∫•t c·∫£</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="multiselect-dropdown" id="nhapDungLuongDropdown" style="display:none">
                        <div class="multiselect-search">
                            <input 
                                type="text" 
                                placeholder="üîç T√¨m dung l∆∞·ª£ng..." 
                                id="nhapDungLuongSearchInput"
                                class="multiselect-search-input"
                            >
                        </div>
                        <div class="multiselect-options" id="nhapDungLuongOptions">
                            <!-- Dynamic options s·∫Ω ƒë∆∞·ª£c populate -->
                        </div>
                        <div class="multiselect-actions">
                            <button class="btn-select-all" onclick="selectAllNhapDungLuong()">
                                Ch·ªçn t·∫•t c·∫£
                            </button>
                            <button class="btn-clear-all" onclick="clearAllNhapDungLuong()">
                                B·ªè ch·ªçn
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Clear All Filters Button -->
                <button class="btn btn-danger btn-clear-filters" onclick="clearAllNhapHangFilters()">
                    <i class="fas fa-times-circle"></i> X√≥a t·∫•t c·∫£ b·ªô l·ªçc
                </button>
            </div>

            <!-- Filter Summary -->
            <div class="filter-summary" id="nhapFilterSummary" style="display:none">
                <span id="nhapFilterSummaryText"></span>
            </div>

            <!-- Total Records Info -->
            <div class="total-records-info" id="nhaphangTotalRecordsInfo">
                <small>T·ªïng s·ªë b·∫£n ghi: <span id="nhaphangTotalRecordsCount">0</span></small>
            </div>

            <!-- Data Table -->
            <div class="table-responsive">
                <table id="nhaphangTable" class="data-table">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Ng√†y Nh·∫≠p</th>
                            <th>D√≤ng M√°y</th>
                            <th>Dung L∆∞·ª£ng</th>
                            <th>M√†u S·∫Øc</th>
                            <th>IMEI</th>
                            <th>IMEI V5</th>
                            <th>Gi√° Nh·∫≠p</th>
                            <th>Nh√† Cung C·∫•p</th>
                            <th>M√¥ T·∫£ Nh·∫≠p</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="nhaphangTableBody">
                        <!-- Data s·∫Ω ƒë∆∞·ª£c load t·ª´ API -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <div class="pagination-controls">
                    <div class="page-size-selector">
                        <label for="nhaphangPageSize">Hi·ªÉn th·ªã:</label>
                        <select id="nhaphangPageSize" onchange="changeNhapHangPageSize()" class="form-control">
                            <option value="10">10 b·∫£n ghi</option>
                            <option value="20">20 b·∫£n ghi</option>
                            <option value="50" selected>50 b·∫£n ghi</option>
                            <option value="100">100 b·∫£n ghi</option>
                        </select>
                    </div>
                    <div class="page-navigation">
                        <button class="btn btn-secondary" onclick="prevNhapHangPage()" id="prevNhapHangBtn">
                            <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
                        </button>
                        <span id="nhaphangPageInfo">Trang 1 / 1</span>
                        <button class="btn btn-secondary" onclick="nextNhapHangPage()" id="nextNhapHangBtn">
                            Sau <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- BanHang Module -->
        <div id="banhang" class="module">
            <div class="module-header">
                <div class="module-title-group">
                    <h2><i class="fas fa-shopping-cart"></i> B√°n H√†ng</h2>
                    <div class="month-selector-inline">
                        <label>Th√°ng:</label>
                        <div class="mobile-multiselect large-selector">
                            <button class="multiselect-btn" onclick="toggleBanHangMonthDropdown()">
                                <span id="banhangMonthBtnText">Ch·ªçn th√°ng</span>
                                <span class="count" id="banhangMonthCount">0</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                    <div class="multiselect-dropdown" id="banhangMonthDropdown">
                        <div class="multiselect-actions">
                            <button onclick="selectAllBanHangMonths()">Ch·ªçn t·∫•t c·∫£</button>
                            <button onclick="clearAllBanHangMonths()">B·ªè ch·ªçn</button>
                        </div>
                        <div class="multiselect-options" id="banhangMonthOptions">
                            <!-- Options will be rendered here -->
                        </div>
                    </div>
                        </div>
                        <button class="btn btn-primary btn-sm" onclick="loadBanHangData()">
                            <i class="fas fa-download"></i> T·∫£i D·ªØ Li·ªáu
                        </button>
                        <span class="last-update" id="banhangLastUpdate"></span>
                    </div>
                </div>
            </div>

            <!-- Mobile-Optimized Filters -->
            <div class="filters-mobile">
                <!-- Kh√°ch H√†ng Filter -->
                <div class="filter-card">
                    <div class="filter-input-group">
                        <input 
                            type="text" 
                            id="banhangKhachHangSearch" 
                            placeholder="üîç Nh·∫≠p kh√°ch h√†ng..."
                            class="filter-input-number"
                        >
                    </div>
                </div>

                <!-- IMEI V5 Filter -->
                <div class="filter-card">
                    <div class="filter-input-group">
                        <input 
                            type="text" 
                            id="banhangImeiV5Search" 
                            placeholder="üîç Nh·∫≠p 5 s·ªë cu·ªëi IMEI"
                            maxlength="5"
                            pattern="[0-9]*"
                            inputmode="numeric"
                            class="filter-input-number"
                        >
                        <span class="filter-count" id="banhangImeiV5Count"></span>
                    </div>
                </div>

                <!-- D√≤ng M√°y Mobile Multi-Select -->
                <div class="mobile-multiselect">
                    <button class="multiselect-btn" id="banhangDongMayBtn" type="button">
                        <i class="fas fa-mobile-alt"></i>
                        <span>D√≤ng M√°y</span>
                        <span class="count" id="banhangDongMayCount">T·∫•t c·∫£</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="multiselect-dropdown" id="banhangDongMayDropdown" style="display:none">
                        <div class="multiselect-search">
                            <input 
                                type="text" 
                                placeholder="üîç T√¨m d√≤ng m√°y..." 
                                id="banhangDongMaySearch"
                                class="multiselect-search-input"
                            >
                        </div>
                        <div class="multiselect-options" id="banhangDongMayOptions">
                            <!-- Dynamic options s·∫Ω ƒë∆∞·ª£c populate -->
                        </div>
                        <div class="multiselect-actions">
                            <button class="btn-select-all" onclick="selectAllBanHangDongMay()">
                                Ch·ªçn t·∫•t c·∫£
                            </button>
                            <button class="btn-clear-all" onclick="clearAllBanHangDongMay()">
                                B·ªè ch·ªçn
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Dung L∆∞·ª£ng Mobile Multi-Select -->
                <div class="mobile-multiselect">
                    <button class="multiselect-btn" id="banhangDungLuongBtn" type="button">
                        <i class="fas fa-database"></i>
                        <span>Dung L∆∞·ª£ng</span>
                        <span class="count" id="banhangDungLuongCount">T·∫•t c·∫£</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="multiselect-dropdown" id="banhangDungLuongDropdown" style="display:none">
                        <div class="multiselect-search">
                            <input 
                                type="text" 
                                placeholder="üîç T√¨m dung l∆∞·ª£ng..." 
                                id="banhangDungLuongSearch"
                                class="multiselect-search-input"
                            >
                        </div>
                        <div class="multiselect-options" id="banhangDungLuongOptions">
                            <!-- Dynamic options s·∫Ω ƒë∆∞·ª£c populate -->
                        </div>
                        <div class="multiselect-actions">
                            <button class="btn-select-all" onclick="selectAllBanHangDungLuong()">
                                Ch·ªçn t·∫•t c·∫£
                            </button>
                            <button class="btn-clear-all" onclick="clearAllBanHangDungLuong()">
                                B·ªè ch·ªçn
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Clear All Filters Button -->
                <button class="btn btn-danger btn-clear-filters" onclick="clearAllBanHangFilters()" style="display: none;">
                    <i class="fas fa-times-circle"></i> X√≥a t·∫•t c·∫£ b·ªô l·ªçc
                </button>
            </div>

            <!-- Filter Summary -->
            <div class="filter-summary" id="banhangFilterSummary" style="display:none">
                <span id="banhangFilterSummaryText"></span>
            </div>

            <!-- Total Records Info -->
            <div class="total-records-info" id="banhangTotalRecordsInfo">
                <small>T·ªïng s·ªë b·∫£n ghi: <span id="banhangTotalRecordsCount">0</span></small>
            </div>

            <!-- Data Table -->
            <div class="table-responsive">
                <table id="banhangTable" class="data-table">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Ng√†y B√°n</th>
                            <th>D√≤ng M√°y</th>
                            <th>Dung L∆∞·ª£ng</th>
                            <th>M√†u S·∫Øc</th>
                            <th>IMEI</th>
                            <th>IMEI V5</th>
                            <th>Gi√° B√°n</th>
                            <th>Kh√°ch H√†ng</th>
                            <th>L·ª£i Nhu·∫≠n</th>
                            <th>Gi√° Nh·∫≠p</th>
                            <th>Ng√†y Nh·∫≠p</th>
                            <th>Nh√† Cung C·∫•p</th>
                            <th>M√¥ T·∫£ Nh·∫≠p</th>
                        </tr>
                    </thead>
                    <tbody id="banhangTableBody">
                        <!-- Data s·∫Ω ƒë∆∞·ª£c load t·ª´ API -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <div class="pagination-controls">
                    <div class="page-size-selector">
                        <label for="banhangPageSize">Hi·ªÉn th·ªã:</label>
                        <select id="banhangPageSize" onchange="changeBanHangPageSize()" class="form-control">
                            <option value="10">10 b·∫£n ghi</option>
                            <option value="20">20 b·∫£n ghi</option>
                            <option value="50" selected>50 b·∫£n ghi</option>
                            <option value="100">100 b·∫£n ghi</option>
                        </select>
                    </div>
                    <div class="page-navigation">
                        <button class="btn btn-secondary" onclick="prevBanHangPage()" id="prevBanHangBtn">
                            <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
                        </button>
                        <span id="banhangPageInfo">Trang 1 / 1</span>
                        <button class="btn btn-secondary" onclick="nextBanHangPage()" id="nextBanHangBtn">
                            Sau <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- XuatHuy Module -->
        <div id="xuathuy" class="module">
            <div class="module-header">
                <h2><i class="fas fa-trash"></i> Xu·∫•t H·ªßy / Tr·∫£ NCC</h2>
                <div class="actions">
                    <button class="btn btn-primary" onclick="addXuatHuy()">
                        <i class="fas fa-plus"></i> Th√™m Xu·∫•t H·ªßy
                    </button>
                    <button class="btn btn-info" onclick="exportXuatHuy()">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>

            <!-- Data Table -->
            <div class="table-responsive">
                <table id="xuathuyTable" class="data-table">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Ng√†y Xu·∫•t H·ªßy</th>
                            <th>Lo·∫°i Xu·∫•t H·ªßy</th>
                            <th>IMEI</th>
                            <th>IMEI V5</th>
                            <th>D√≤ng M√°y</th>
                            <th>Dung L∆∞·ª£ng</th>
                            <th>M√†u S·∫Øc</th>
                            <th>Gi√° Nh·∫≠p</th>
                            <th>Nh√† CC</th>
                            <th>Ph√≠ Xu·∫•t H·ªßy</th>
                            <th>M√¥ T·∫£ Xu·∫•t H·ªßy</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="xuathuyTableBody">
                        <!-- Data s·∫Ω ƒë∆∞·ª£c load t·ª´ API -->
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <button class="btn btn-secondary" onclick="prevXuatHuyPage()" id="prevXuatHuyBtn">
                    <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
                </button>
                <span id="xuathuyPageInfo">Trang 1 / 1</span>
                <button class="btn btn-secondary" onclick="nextXuatHuyPage()" id="nextXuatHuyBtn">
                    Sau <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <!-- Search Module -->
        <div id="search" class="module">
            <!-- Module Header -->
            <div class="module-header">
                <h2><i class="fas fa-user-friends"></i> T√¨m Ki·∫øm Kh√°ch H√†ng</h2>
            </div>

            <!-- T√¨m Theo Kh√°ch H√†ng Section -->
            <div class="search-section">
                <div class="search-form">
                    <div class="search-controls-group">
                        <div class="search-filter-item">
                            <div class="filter-input-group">
                                <input 
                                    type="text" 
                                    id="customerSearch" 
                                    placeholder="üîç Nh·∫≠p kh√°ch h√†ng..."
                                    class="filter-input-number"
                                >
                            </div>
                        </div>
                        <div class="search-filter-item">
                            <div class="mobile-multiselect large-selector">
                                <button class="multiselect-btn" onclick="toggleSearchMonthDropdown()">
                                    <span id="searchMonthBtnText">Ch·ªçn th√°ng</span>
                                    <span class="count" id="searchMonthCount">0</span>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                                <div class="multiselect-dropdown" id="searchMonthDropdown">
                                    <div class="multiselect-actions">
                                        <button onclick="selectAllSearchMonths()">Ch·ªçn t·∫•t c·∫£</button>
                                        <button onclick="clearAllSearchMonths()">B·ªè ch·ªçn</button>
                                    </div>
                                    <div class="multiselect-options" id="searchMonthOptions">
                                        <!-- Options s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-search-customer" onclick="searchCustomer()">
                            <i class="fas fa-search"></i> T√¨m Kh√°ch H√†ng
                        </button>
                    </div>
                </div>

                <!-- Total Records Info -->
                <div class="total-records-info" id="customerTotalRecordsInfo" style="display:none">
                    <small>T·ªïng s·ªë b·∫£n ghi: <span id="customerTotalRecordsCount">0</span></small>
                </div>

                <!-- Data Table -->
                <div class="table-responsive">
                    <table id="customerSearchTable" class="data-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>Ng√†y B√°n</th>
                                <th>D√≤ng M√°y</th>
                                <th>Dung L∆∞·ª£ng</th>
                                <th>M√†u S·∫Øc</th>
                                <th>IMEI</th>
                                <th>IMEI V5</th>
                                <th>Gi√° B√°n</th>
                                <th>Kh√°ch H√†ng</th>
                                <th>L·ª£i Nhu·∫≠n</th>
                                <th>Gi√° Nh·∫≠p</th>
                                <th>Ng√†y Nh·∫≠p</th>
                                <th>Nh√† Cung C·∫•p</th>
                                <th>M√¥ T·∫£ Nh·∫≠p</th>
                            </tr>
                        </thead>
                        <tbody id="customerSearchTableBody">
                            <!-- Data s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <div class="pagination-controls">
                        <div class="page-size-selector">
                            <label for="customerPageSize">Hi·ªÉn th·ªã:</label>
                            <select id="customerPageSize" onchange="changeCustomerPageSize()" class="form-control">
                                <option value="10">10 b·∫£n ghi</option>
                                <option value="20">20 b·∫£n ghi</option>
                                <option value="50" selected>50 b·∫£n ghi</option>
                                <option value="100">100 b·∫£n ghi</option>
                            </select>
                        </div>
                        <div class="page-navigation">
                            <button class="btn btn-secondary" onclick="prevCustomerPage()" id="prevCustomerBtn">
                                <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
                            </button>
                            <span id="customerPageInfo">Trang 1 / 1</span>
                            <button class="btn btn-secondary" onclick="nextCustomerPage()" id="nextCustomerBtn">
                                Sau <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- T√¨m Theo IMEI Section -->
            <div class="search-section">
                <div class="module-header">
                    <h2><i class="fas fa-hashtag"></i> T√¨m Theo IMEI</h2>
                </div>

                <div class="search-form">
                    <div class="search-controls-group">
                        <div class="search-filter-item">
                            <div class="filter-input-group">
                                <input 
                                    type="text" 
                                    id="imeiSearchInput" 
                                    placeholder="üîç Nh·∫≠p IMEI ƒë·∫ßy ƒë·ªß..."
                                    class="filter-input-number"
                                >
                            </div>
                        </div>
                        <button class="btn btn-primary btn-search-customer" onclick="searchIMEI()">
                            <i class="fas fa-search"></i> T√¨m Theo IMEI
                        </button>
                    </div>
                </div>

                <!-- Total Records Info -->
                <div class="total-records-info" id="imeiTotalRecordsInfo" style="display:none">
                    <small>T·ªïng s·ªë b·∫£n ghi: <span id="imeiTotalRecordsCount">0</span></small>
                </div>

                <!-- Data Table -->
                <div class="table-responsive">
                    <table id="imeiSearchTable" class="data-table">
                        <thead>
                            <tr>
                                <th>STT</th>
                                <th>IMEI</th>
                                <th>Lo·∫°i Giao D·ªãch</th>
                                <th>Ng√†y</th>
                                <th>D√≤ng M√°y</th>
                                <th>Dung L∆∞·ª£ng</th>
                                <th>M√†u S·∫Øc</th>
                                <th>Gi√° Nh·∫≠p</th>
                                <th>Nh√† Cung C·∫•p</th>
                                <th>M√¥ T·∫£ Nh·∫≠p</th>
                                <th>Gi√° B√°n</th>
                                <th>Kh√°ch H√†ng</th>
                            </tr>
                        </thead>
                        <tbody id="imeiSearchTableBody">
                            <!-- Data s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <div class="pagination-controls">
                        <div class="page-size-selector">
                            <label for="imeiPageSize">Hi·ªÉn th·ªã:</label>
                            <select id="imeiPageSize" onchange="changeImeiPageSize()" class="form-control">
                                <option value="10">10 b·∫£n ghi</option>
                                <option value="20">20 b·∫£n ghi</option>
                                <option value="50" selected>50 b·∫£n ghi</option>
                                <option value="100">100 b·∫£n ghi</option>
                            </select>
                        </div>
                        <div class="page-navigation">
                            <button class="btn btn-secondary" onclick="prevImeiPage()" id="prevImeiBtn">
                                <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
                            </button>
                            <span id="imeiPageInfo">Trang 1 / 1</span>
                            <button class="btn btn-secondary" onclick="nextImeiPage()" id="nextImeiBtn">
                                Sau <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- BaoCao Module -->
        <div id="baocao" class="module">
            <div class="module-header">
                <h2><i class="fas fa-chart-bar"></i> B√°o C√°o</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="refreshAllBaoCao()">
                        <i class="fas fa-sync-alt"></i> L√†m M·ªõi T·∫•t C·∫£
                    </button>
                    <span id="baocaoLastUpdate" class="last-update"></span>
                </div>
            </div>

            <div class="baocao-container">
                <!-- B√°o C√°o T·ªìn Kho Theo D√≤ng M√°y -->
                <div class="baocao-tonkho">
                    <div class="section-header">
                        <h3>üì¶ T·ªìn Kho Theo D√≤ng M√°y</h3>
                        <div class="section-actions">
                            <button class="btn btn-sm btn-primary" onclick="refreshBaoCaoTonKho()">
                                üîÑ C·∫≠p Nh·∫≠t
                            </button>
                            <span id="baocaoTonKhoLastUpdate" class="last-update"></span>
                        </div>
                    </div>
                    
                    <div class="baocao-summary">
                        <div class="summary-item">
                            <span class="label">T·ªïng S·ªë L∆∞·ª£ng:</span>
                            <span id="totalQuantity" class="value">0</span>
                        </div>
                        <div class="summary-item">
                            <span class="label">T·ªïng Gi√° Tr·ªã:</span>
                            <span id="totalValue" class="value">0 ƒë</span>
                        </div>
                    </div>

                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>D√≤ng M√°y</th>
                                    <th>S·ªë L∆∞·ª£ng</th>
                                    <th>Gi√° Tr·ªã</th>
                                </tr>
                            </thead>
                            <tbody id="baocaoTableBody">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- TOP S·∫¢N PH·∫®M B√ÅN CH·∫†Y -->
                <div class="baocao-topproducts">
                    <div class="section-header">
                        <h3>üèÜ TOP B√°n Ch·∫°y</h3>
                        <div class="section-actions">
                            <div class="top-products-controls">
                                <div class="days-input-group">
                                    <input type="number" id="topProductsDays" placeholder="S·ªë ng√†y" value="120">
                                    <span>ng√†y</span>
                                </div>
                                <button class="btn btn-sm btn-primary" onclick="refreshTopProducts()">
                                    üìä Th·ªëng K√™
                                </button>
                            </div>
                            <span id="topProductsLastUpdate" class="last-update"></span>
                        </div>
                    </div>
                    
                    <div id="topProductsLoading" class="loading-indicator" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i> ƒêang t√≠nh to√°n...
                    </div>
                    
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>D√≤ng M√°y</th>
                                    <th>S·ªë L∆∞·ª£ng</th>
                                </tr>
                            </thead>
                            <tbody id="topProductsTableBody">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="last-update">
                        <span id="topproductsLastUpdate"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tools Module -->
        <div id="tools" class="module">
            <div class="module-header">
                <h2><i class="fas fa-tools"></i> Admin Tools</h2>
            </div>

            <div class="tools-grid">
                <div class="tool-card">
                    <h3><i class="fas fa-sync-alt"></i> ƒê·ªìng B·ªô D·ªØ Li·ªáu</h3>
                    <p>ƒê·ªìng b·ªô th√¥ng tin t·ª´ NhapHang sang TonKho</p>
                    <button class="btn btn-primary" onclick="syncData()">ƒê·ªìng B·ªô</button>
                </div>
                <div class="tool-card">
                    <h3><i class="fas fa-calculator"></i> T√≠nh L·ª£i Nhu·∫≠n</h3>
                    <p>T√≠nh l·∫°i l·ª£i nhu·∫≠n cho t·∫•t c·∫£ giao d·ªãch b√°n</p>
                    <button class="btn btn-warning" onclick="calculateProfit()">T√≠nh L·∫°i</button>
                </div>
                <div class="tool-card">
                    <h3><i class="fas fa-balance-scale"></i> ƒê·ªëi Chi·∫øu T·ªìn Kho</h3>
                    <p>So s√°nh TonKho v·ªõi TinhTonKho</p>
                    <button class="btn btn-info" onclick="compareTonKho()">ƒê·ªëi Chi·∫øu</button>
                </div>
                <div class="tool-card">
                    <h3><i class="fas fa-save"></i> Backup D·ªØ Li·ªáu</h3>
                    <p>T·∫°o backup v√† g·ª≠i email</p>
                    <button class="btn btn-success" onclick="backupData()">Backup</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
        </div>
    </div>

    <!-- Modal for Add/Edit -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Th√™m M·ªõi</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Form content will be loaded here -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">H·ªßy</button>
                <button class="btn btn-primary" onclick="saveModal()">L∆∞u</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/admin.js"></script>
</body>
</html>


